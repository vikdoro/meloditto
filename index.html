<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width">
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
        }

        html, body {
            height: 100%;
            margin: 0;
        }

        pie-app {
            height: 100%;
        }
    </style>
</head>
<body>
    <pie-app id="app"></pie-app>
</body>
<script src="node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>

<script>
  var context;
  window.addEventListener('load', init, false);
  function init() {
    try {
      // Fix up for prefixing
      window.AudioContext = window.AudioContext||window.webkitAudioContext;
      context = new AudioContext();
      console.log('all good');
    }
    catch(e) {
      alert('Web Audio API is not supported in this browser');
    }
  }
</script>

<!-- Load a custom element definitions in `waitFor` and return a promise -->
<script type="module">
    WebComponents.waitFor(() => {
        // At this point we are guaranteed that all required polyfills have
        // loaded, and can use web components API's.
        // The standard pattern is to load element definitions that call
        // `customElements.define` here.
        // Note: returning the import's promise causes the custom elements
        // polyfill to wait until all definitions are loaded and then upgrade
        // the document in one batch, for better performance.
        // appReady = true;
    
        return import('./src/pie-app.js');
    });
</script>
</html>